const wrapper=document.querySelector("#example");let hoverTimeout=null,currentElement=null,hideTimeout=null,isModalVisible=!1;function startHideTimer(){hideTimeout&&clearTimeout(hideTimeout),hideTimeout=setTimeout(()=>{removeModal(),removeTextDecoration()},1e3)}function yourCustomFunction(e){removeModal();const t=document.createElement("div");t.classList.add("modal-content"),t.classList.add("info-agent-modal"),t.innerHTML='<div class="modal-body">\n            <div class="modal-body-l d-flex align-items-center mb-0 justify-content-between">\n                <h2 class="modal-title" id="exampleInfoAgentModalLabel">\n                    <span>Агент</span>\n                </h2>\n                <button type="button" class="btn-close close-modal-btn" aria-label="Close"></button>\n            </div>\n            <div class="modal-body-l info-user">\n                <div class="info-user-item">\n                    <div class="left">\n                        <img src="./img/avatar-user.jpg" alt="">\n                    </div>\n                    <div class="right">\n                        <p class="info-user-name">Василий Федотов</p>\n                        <p class="info-user-agency">Real Estate Name</p>\n                        <p class="info-user-city">Manhattan</p>\n                        <a class="info-user-chat" href="#">\n                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-dots" viewBox="0 0 16 16">\n                                <path d="M5 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0m4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0m3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2"/>\n                                <path d="m2.165 15.803.02-.004c1.83-.363 2.948-.842 3.468-1.105A9 9 0 0 0 8 15c4.418 0 8-3.134 8-7s-3.582-7-8-7-8 3.134-8 7c0 1.76.743 3.37 1.97 4.6a10.4 10.4 0 0 1-.524 2.318l-.003.011a11 11 0 0 1-.244.637c-.079.186.074.394.273.362a22 22 0 0 0 .693-.125m.8-3.108a1 1 0 0 0-.287-.801C1.618 10.83 1 9.468 1 8c0-3.192 3.004-6 7-6s7 2.808 7 6-3.004 6-7 6a8 8 0 0 1-2.088-.272 1 1 0 0 0-.711.074c-.387.196-1.24.57-2.634.893a11 11 0 0 0 .398-2"/>\n                            </svg>\n                        </a>\n                    </div>\n                </div>\n                <div class="info-user-item">\n                    <div class="left">\n                        <p>Телефон</p>\n                    </div>\n                    <div class="right">\n                        <a class="info-user-phone" href="tel:+381231257869">+38 (123) 125 - 78 - 69</a>\n                        <a class="info-user-phone" href="tel:+381231257869">+38 (123) 125 - 78 - 69</a>\n                        <div class="info-user-socList">\n                            <a href="https://wa.me/380XXXXXXXXX">\n                                <img src="./img/icon/icon-table/cnapchat.svg" alt="">\n                            </a>\n                            <img src="./img/icon/icon-table/viber.svg" alt="">\n                            </a>\n                            <a href="https://t.me/+380XXXXXXXXX">\n                                <img src="./img/icon/icon-table/tg.svg" alt="">\n                            <a href="#">\n                                <img src="./img/icon/icon-table/instagram.svg" alt="">\n                            </a>\n                            <a href="#">\n                                <img src="./img/icon/icon-table/facebook.svg" alt="">\n                            </a>\n                            <a href="#">\n                                <img src="./img/icon/icon-table/tiktok.svg" alt="">\n                            </a>\n                        </div>\n                    </div>\n                </div>\n                <div class="info-user-item">\n                    <div class="left">\n                        <p>Email</p>\n                    </div>\n                    <div class="right">\n                        <a class="info-user-email" href="#">email@gmail.com</a>\n                    </div>\n                </div>\n                <div class="info-user-item">\n                    <div class="left">\n                        <p>Обо мне</p>\n                    </div>\n                    <div class="right">\n                        <p class="info-user-description-text">\n                            <span class="main-text">Текст небольшой о себе об агенте две строки</span>\n                            <span class="more-text" style="display: none;">\n                            Текст небольшой о себе об агенте две строки Текст небольшой о себе об агенте две строки\n                            </span>\n                            <button class="btn btn-show-text2" type="button">Ещё</button>\n                        </p>\n                    </div>\n                </div>\n            </div>\n            <div class="modal-body-l mb-0">\n                <a class="btn btn-primary" href="#">Открыть профиль</a>\n            </div>\n        </div>',document.body.appendChild(t),calculatePopupPosition(t,e),isModalVisible=!0;const n=t.querySelector(".close-modal-btn");n&&n.addEventListener("click",()=>{removeTextDecoration(),removeModal()});const o=t.querySelector(".btn-show-text2");o&&o.addEventListener("click",(function(){const e=this.closest(".info-user-description-text"),t=e.querySelector(".more-text"),n=e.querySelector(".main-text");"none"===t.style.display?(t.style.display="inline",n.style.display="none",this.textContent="Скрыть"):(t.style.display="none",n.style.display="inline",this.textContent="Ещё")}))}function calculatePopupPosition(e,t){const n=t.getBoundingClientRect(),o=window.innerHeight,i=window.innerWidth;e.style.top="",e.style.bottom="",e.style.right="",e.style.left="",e.style.transform="",e.style.position="fixed",e.style.zIndex="9999",e.style.width="340px",e.style.padding="16px",e.style.boxShadow="0 0 4px 0 #aaa",e.style.borderRadius="8px",e.style.backgroundColor="white";const a=e.getBoundingClientRect();let s=n.right+20,l=n.top;s+a.width>i&&(s=n.left-a.width),l+a.height>o?l=o-a.height-20:l<20&&(l=20),e.style.left=s+"px",e.style.top=l+"px"}function removeModal(){const e=document.querySelector(".info-agent-modal");e&&e.remove(),isModalVisible=!1,hideTimeout&&(clearTimeout(hideTimeout),hideTimeout=null),hoverTimeout&&(clearTimeout(hoverTimeout),hoverTimeout=null)}function removeTextDecoration(){currentElement&&(currentElement.style.textDecoration="",currentElement=null)}wrapper.addEventListener("mouseover",e=>{const t=e.target.closest("[data-hover-contact-or-agent]");t&&(hoverTimeout&&clearTimeout(hoverTimeout),hoverTimeout=setTimeout(()=>{currentElement&&currentElement!==t&&(currentElement.style.textDecoration=""),currentElement=t,t.style.textDecoration="underline",yourCustomFunction(t)},300))}),wrapper.addEventListener("mouseout",e=>{e.target.closest("[data-hover-contact-or-agent]")&&(hoverTimeout&&(clearTimeout(hoverTimeout),hoverTimeout=null),startHideTimer())}),document.addEventListener("mouseover",e=>{e.target.closest(".info-agent-modal")&&hideTimeout&&(clearTimeout(hideTimeout),hideTimeout=null)}),document.addEventListener("mouseout",e=>{e.target.closest(".info-agent-modal")&&startHideTimer()}),document.addEventListener("click",e=>{e.target.closest(".info-agent-modal")||e.target.closest("[data-hover-contact-or-agent]")||(removeModal(),removeTextDecoration())}),window.addEventListener("resize",()=>{const e=document.querySelector(".info-agent-modal");e&&currentElement&&calculatePopupPosition(e,currentElement)}),window.addEventListener("scroll",()=>{const e=document.querySelector(".info-agent-modal");e&&currentElement&&calculatePopupPosition(e,currentElement)});